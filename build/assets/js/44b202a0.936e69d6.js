"use strict";(self.webpackChunkv3_docs=self.webpackChunkv3_docs||[]).push([[6930],{19293:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>d,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"tutorials/permissionamento","title":"Permissionamento","description":"Quando voc\xea obt\xe9m um token com sucesso, a resposta ter\xe1 a seguinte estrutura:","source":"@site/docs/tutorials/05-permissionamento.md","sourceDirName":"tutorials","slug":"/tutorials/permissionamento","permalink":"/docs/tutorials/permissionamento","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Autentica\xe7\xe3o","permalink":"/docs/tutorials/autenticacao"},"next":{"title":"Gerenciamento","permalink":"/docs/tutorials/gerenciamento"}}');var r=n(74848),o=n(28453);const a={sidebar_position:5},d="Permissionamento",l={},c=[{value:"Claims do Token",id:"claims-do-token",level:3},{value:"N\xedveis de Permiss\xe3o",id:"n\xedveis-de-permiss\xe3o",level:3},{value:"Verificando Permiss\xf5es",id:"verificando-permiss\xf5es",level:3},{value:"Hierarquia de Permiss\xf5es",id:"hierarquia-de-permiss\xf5es",level:3}];function t(e){const s={code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"permissionamento",children:"Permissionamento"})}),"\n",(0,r.jsx)(s.p,{children:"Quando voc\xea obt\xe9m um token com sucesso, a resposta ter\xe1 a seguinte estrutura:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",\n    "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",\n    "expires_in": 3600,\n    "refresh_expires_in": 1800,\n    "token_type": "Bearer",\n    "scope": "profile email roles custom-claims"\n}\n'})}),"\n",(0,r.jsx)(s.h3,{id:"claims-do-token",children:"Claims do Token"}),"\n",(0,r.jsx)(s.p,{children:"O token de acesso cont\xe9m informa\xe7\xf5es importantes sobre o usu\xe1rio e suas permiss\xf5es. Voc\xea pode decodificar o token (que \xe9 um JWT) para ver estas informa\xe7\xf5es. O token cont\xe9m as seguintes claims:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "exp": 1745880770,\n  "iat": 1745877170,\n  "jti": "71295191-db3f-47ce-a748-108aff0d71c2",\n  "iss": "https://0e45-186-212-1-130.ngrok-free.app/realms/sso-v3",\n  "typ": "Bearer",\n  "azp": "v3-client",\n  "sid": "d00dda5f-0bbf-4fc8-8132-c0bfe75a227d",\n  "realm_access": {\n    "roles": [\n      "tenant_admin_role"\n    ]\n  },\n  "scope": "custom-claims",\n  "tenant_id": "suaempresa",\n  "account_id": "123456"\n}\n'})}),"\n",(0,r.jsx)(s.h3,{id:"n\xedveis-de-permiss\xe3o",children:"N\xedveis de Permiss\xe3o"}),"\n",(0,r.jsx)(s.p,{children:"O sistema utiliza um modelo de permiss\xf5es baseado em roles (pap\xe9is) em diferentes n\xedveis:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Roles do Realm"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"admin_role"}),": Acesso administrativo V3"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"tenant_admin_role"}),": Administrador do tenant"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"tenant_role"}),": Usu\xe1rio b\xe1sico do tenant"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Roles do Cliente"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Cada cliente (aplica\xe7\xe3o) pode ter suas pr\xf3prias roles"}),"\n",(0,r.jsxs)(s.li,{children:["Exemplo: ",(0,r.jsx)(s.code,{children:"v3-client"})," pode ter roles como ",(0,r.jsx)(s.code,{children:"admin"})," e ",(0,r.jsx)(s.code,{children:"user"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Claims Personalizadas"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"account_id"}),": Identificador da conta"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"tenant_id"}),": Identificador do tenant"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"verificando-permiss\xf5es",children:"Verificando Permiss\xf5es"}),"\n",(0,r.jsx)(s.p,{children:"Para verificar suas permiss\xf5es atuais, voc\xea pode:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Decodificar o token JWT (usando ferramentas como jwt.io)"}),"\n",(0,r.jsx)(s.li,{children:"Fazer uma requisi\xe7\xe3o de valida\xe7\xe3o do token:"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",children:"GET /auth/token\nAuthorization: Bearer SEU_ACCESS_TOKEN\n"})}),"\n",(0,r.jsx)(s.p,{children:"A resposta incluir\xe1 todas as claims e roles associadas ao seu token."}),"\n",(0,r.jsx)(s.h3,{id:"hierarquia-de-permiss\xf5es",children:"Hierarquia de Permiss\xf5es"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Admin do Realm"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Acesso total ao sistema"}),"\n",(0,r.jsx)(s.li,{children:"Pode gerenciar todos os tenants"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Admin do Tenant"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Acesso administrativo ao seu tenant"}),"\n",(0,r.jsx)(s.li,{children:"Pode gerenciar usu\xe1rios do tenant"}),"\n",(0,r.jsxs)(s.li,{children:["Permite:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Todas as permiss\xf5es do n\xedvel TENANT"}),"\n",(0,r.jsx)(s.li,{children:"Cria\xe7\xe3o de Orders Internas"}),"\n",(0,r.jsx)(s.li,{children:"Acesso irrestrito ao sistema"}),"\n",(0,r.jsx)(s.li,{children:"Deve ser concedido com cautela"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Usu\xe1rio do Tenant"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Acesso b\xe1sico \xe0s funcionalidades"}),"\n",(0,r.jsx)(s.li,{children:"Permiss\xf5es limitadas ao seu tenant"}),"\n",(0,r.jsxs)(s.li,{children:["Permite:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Visualiza\xe7\xe3o de dados"}),"\n",(0,r.jsx)(s.li,{children:"Opera\xe7\xf5es b\xe1sicas de gerenciamento"}),"\n",(0,r.jsx)(s.li,{children:"Acesso \xe0s funcionalidades padr\xe3o"}),"\n",(0,r.jsx)(s.li,{children:"Integra\xe7\xe3o com APIs comuns"}),"\n",(0,r.jsx)(s.li,{children:"Recomendado para opera\xe7\xf5es di\xe1rias"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function m(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>d});var i=n(96540);const r={},o=i.createContext(r);function a(e){const s=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);