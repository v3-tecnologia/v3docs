"use strict";(self.webpackChunkv3_docs=self.webpackChunkv3_docs||[]).push([[1653],{24663:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"tutorials/autenticacao","title":"Autentica\xe7\xe3o","description":"Este documento fornece um guia entender e implementar a autentica\xe7\xe3o em nosso sistema. Utilizamos OAuth 2.0 com OpenID Connect para autentica\xe7\xe3o e autoriza\xe7\xe3o seguras.","source":"@site/docs/tutorials/04-autenticacao.md","sourceDirName":"tutorials","slug":"/tutorials/autenticacao","permalink":"/docs/tutorials/autenticacao","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Configura\xe7\xe3o Inicial","permalink":"/docs/tutorials/configuracao-inicial"},"next":{"title":"Permissionamento","permalink":"/docs/tutorials/permissionamento"}}');var a=s(74848),i=s(28453);const r={sidebar_position:4},t="Autentica\xe7\xe3o",c={},d=[{value:"Conceitos Principais",id:"conceitos-principais",level:2},{value:"OAuth 2.0",id:"oauth-20",level:3},{value:"OpenID Connect",id:"openid-connect",level:3},{value:"Componentes Principais",id:"componentes-principais",level:3},{value:"Fluxo de Autentica\xe7\xe3o",id:"fluxo-de-autentica\xe7\xe3o",level:2},{value:"1. Obtendo um Access Token",id:"1-obtendo-um-access-token",level:3},{value:"2. Usando o Access Token",id:"2-usando-o-access-token",level:3},{value:"3. Atualizando o Access Token",id:"3-atualizando-o-access-token",level:3},{value:"Melhores Pr\xe1ticas",id:"melhores-pr\xe1ticas",level:2},{value:"Tratamento de Erros",id:"tratamento-de-erros",level:2},{value:"Valida\xe7\xe3o de Token",id:"valida\xe7\xe3o-de-token",level:2},{value:"Notas Importantes",id:"notas-importantes",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"autentica\xe7\xe3o",children:"Autentica\xe7\xe3o"})}),"\n",(0,a.jsx)(n.p,{children:"Este documento fornece um guia entender e implementar a autentica\xe7\xe3o em nosso sistema. Utilizamos OAuth 2.0 com OpenID Connect para autentica\xe7\xe3o e autoriza\xe7\xe3o seguras."}),"\n",(0,a.jsx)(n.h2,{id:"conceitos-principais",children:"Conceitos Principais"}),"\n",(0,a.jsx)(n.h3,{id:"oauth-20",children:"OAuth 2.0"}),"\n",(0,a.jsx)(n.p,{children:"OAuth 2.0 \xe9 um framework de autoriza\xe7\xe3o que permite que aplica\xe7\xf5es obtenham acesso limitado a contas de usu\xe1rios em um servi\xe7o HTTP. Ele funciona delegando a autentica\xe7\xe3o do usu\xe1rio para o servi\xe7o que hospeda a conta do usu\xe1rio e autorizando aplica\xe7\xf5es de terceiros a acessar a conta do usu\xe1rio."}),"\n",(0,a.jsx)(n.h3,{id:"openid-connect",children:"OpenID Connect"}),"\n",(0,a.jsx)(n.p,{children:"OpenID Connect \xe9 uma camada simples de identidade constru\xedda sobre o OAuth 2.0. Ele permite que os clientes verifiquem a identidade dos usu\xe1rios finais e obtenham informa\xe7\xf5es b\xe1sicas de perfil sobre eles."}),"\n",(0,a.jsx)(n.h3,{id:"componentes-principais",children:"Componentes Principais"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Access Token"}),": Uma credencial usada para acessar recursos protegidos"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Refresh Token"}),": Uma credencial usada para obter novos tokens de acesso"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Client ID"}),": Identificador \xfanico para sua aplica\xe7\xe3o"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Client Secret"}),": Chave secreta usada para autenticar sua aplica\xe7\xe3o"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"fluxo-de-autentica\xe7\xe3o",children:"Fluxo de Autentica\xe7\xe3o"}),"\n",(0,a.jsx)(n.h3,{id:"1-obtendo-um-access-token",children:"1. Obtendo um Access Token"}),"\n",(0,a.jsxs)(n.p,{children:["Voc\xea j\xe1 deve estar em posse das suas credenciais assim como ficou documentado em ",(0,a.jsx)(n.strong,{children:"Configura\xe7\xe3o Inicial"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"Para obter um token de acesso, voc\xea precisa fazer uma requisi\xe7\xe3o POST com os seguintes par\xe2metros:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"POST https://sso.v3sandbox.com/auth/token\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=password\nclient_id=SEU_CLIENT_ID\nclient_secret=SEU_CLIENT_SECRET\nusername=SEU_USUARIO\npassword=SUA_SENHA\n"})}),"\n",(0,a.jsx)(n.p,{children:"A resposta incluir\xe1:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"access_token"}),": O token para usar nas requisi\xe7\xf5es da API"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"refresh_token"}),": Token para obter novos tokens de acesso"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"expires_in"}),": Tempo em segundos at\xe9 o token de acesso expirar"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"refresh_expires_in"}),": Tempo em segundos at\xe9 o token de atualiza\xe7\xe3o expirar"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"token_type"}),': Tipo do token (geralmente "Bearer")']}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"scope"}),": Permiss\xf5es concedidas ao token"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"2-usando-o-access-token",children:"2. Usando o Access Token"}),"\n",(0,a.jsx)(n.p,{children:"Inclua o token de acesso no cabe\xe7alho Authorization das suas requisi\xe7\xf5es \xe0 API:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"Authorization: Bearer SEU_ACCESS_TOKEN\n"})}),"\n",(0,a.jsx)(n.h3,{id:"3-atualizando-o-access-token",children:"3. Atualizando o Access Token"}),"\n",(0,a.jsx)(n.p,{children:"Quando seu token de acesso expirar, use o token de atualiza\xe7\xe3o para obter um novo:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"POST https://sso.v3sandbox.com/auth/token\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=refresh_token\nclient_id=SEU_CLIENT_ID\nclient_secret=SEU_CLIENT_SECRET\nrefresh_token=SEU_REFRESH_TOKEN\n"})}),"\n",(0,a.jsx)(n.p,{children:"A resposta conter\xe1 um novo token de acesso e token de atualiza\xe7\xe3o."}),"\n",(0,a.jsx)(n.h2,{id:"melhores-pr\xe1ticas",children:"Melhores Pr\xe1ticas"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Armazenamento de Tokens"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Armazene os tokens de forma segura"}),"\n",(0,a.jsx)(n.li,{children:"Nunca exponha tokens no c\xf3digo do lado do cliente"}),"\n",(0,a.jsx)(n.li,{children:"Use mecanismos seguros de armazenamento"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Gerenciamento de Tokens"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Monitore os tempos de expira\xe7\xe3o dos tokens"}),"\n",(0,a.jsx)(n.li,{children:"Implemente atualiza\xe7\xe3o autom\xe1tica de token antes da expira\xe7\xe3o"}),"\n",(0,a.jsx)(n.li,{children:"Trate erros de atualiza\xe7\xe3o de token adequadamente"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Seguran\xe7a"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Sempre use HTTPS para transmiss\xe3o de tokens"}),"\n",(0,a.jsx)(n.li,{children:"Mantenha os client secrets seguros"}),"\n",(0,a.jsx)(n.li,{children:"Implemente tratamento adequado de erros"}),"\n",(0,a.jsx)(n.li,{children:"Valide tokens antes de usar"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"tratamento-de-erros",children:"Tratamento de Erros"}),"\n",(0,a.jsx)(n.p,{children:"Respostas de erro comuns incluem:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"400 Bad Request: Par\xe2metros de requisi\xe7\xe3o inv\xe1lidos"}),"\n",(0,a.jsx)(n.li,{children:"401 Unauthorized: Token inv\xe1lido ou expirado"}),"\n",(0,a.jsx)(n.li,{children:"500 Internal Server Error: Problemas no servidor"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Cada resposta de erro inclui:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"error"}),": C\xf3digo do erro"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"error_description"}),": Mensagem detalhada do erro"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"valida\xe7\xe3o-de-token",children:"Valida\xe7\xe3o de Token"}),"\n",(0,a.jsx)(n.p,{children:"Voc\xea pode validar o status de um token usando:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:"GET https://sso.v3sandbox.com/auth/token\nAuthorization: Bearer SEU_ACCESS_TOKEN\n"})}),"\n",(0,a.jsx)(n.p,{children:"A resposta indicar\xe1 se o token \xe9 v\xe1lido e incluir\xe1 quaisquer claims associados."}),"\n",(0,a.jsx)(n.h2,{id:"notas-importantes",children:"Notas Importantes"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Tokens de acesso t\xeam vida curta por seguran\xe7a"}),"\n",(0,a.jsx)(n.li,{children:"Tokens de atualiza\xe7\xe3o t\xeam vida \xfatil mais longa"}),"\n",(0,a.jsx)(n.li,{children:"Sempre implemente tratamento adequado de erros"}),"\n",(0,a.jsx)(n.li,{children:"Mantenha suas credenciais de cliente seguras"}),"\n",(0,a.jsx)(n.li,{children:"Monitore os tempos de expira\xe7\xe3o dos tokens"}),"\n",(0,a.jsx)(n.li,{children:"Implemente atualiza\xe7\xe3o autom\xe1tica de token"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>t});var o=s(96540);const a={},i=o.createContext(a);function r(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);